n <- length(dates)#L?nge der ganzen Reihe
print(n)
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) %>%
select(-time) -> temp
print(nrow(temp))
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) %>%
select(-time) -> temp
print(d)
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
print(temp)
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
############################
#Damit kann unter Angabe von
pca <- function(keywords = NA,
categories = 0,
start = as.Date("2006-01-01"),
end,
components = max(length(keywords), length(categories))){
stopifnot("Nur keywords oder categories darf angegeben werden" = is.na(keywords) | categories == 0)
dates = seq.Date(as.Date(start), as.Date(end), by = "month")
dat = tibble(date = NULL, key = NULL, value = NULL)
for (kw in keywords){
for (cat in categories){
as_tibble(gtrends(
keyword = kw,
category = cat,
geo = "DE",
time = "all")$interest_over_time)  -> temp
if (NROW(temp) == 0) stop(str_c("Keine Daten fÃ¼r Kategorie ", cat))
temp %>%
mutate(date = as_date(date)) %>%
select(date = date, key = any_of(c("keyword", "category")), value = hits) %>%
filter(date %in% dates) -> temp
dat <- bind_rows(dat, temp)
}
}
return(pivot_wider(ts_prcomp(dat), names_from = id, values_from = value)[1:components])
}
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
print(temp)
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
rest <- as_tibble(matrix(NA, n - nrow(temp), components))
names(rest) <- str_c("PC",1:components)
temp <- bind_rows(temp, rest)
print(d)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
matrix(NA, 0, 2)
as_tibble(matrix(NA, 0, 2))
names(matrix(NA, 0, 2)) <- c("a", "b")
names(matrix(NA, 4, 2)) <- c("a", "b")
names(matrix(NA, 4, 2))
matrix(NA, 4, 2)
matrix(NA, 4, 2)$names <- c("a", "b")
names(matrix(NA, 4, 2)) <- c("a", "b")
names(matrix(NA, 4, 2)) <- c(a,b)
names(matrix(NA, 4, 2))<- c("a", "b")
colnames(matrix(NA, 4, 2))<- c("a", "b")
colnames(matrix(NA, 4, 2))
colnames(matrix(NA, 4, 2)), prefix = "PC")
colnames(matrix(NA, 4, 2), prefix = "PC")
array(NA, c(4,2,1))
array(NA, c(4,2))
colnames(array(NA, c(4,2))) <- c("a", "b")
names(array(NA, c(4,2))) <- c("a", "b")
c("a", "b")
names(array(NA, c(4,2))) <- list("a", "b")
colnames(array(NA, c(4,2))) <- list("a", "b")
assign(names(array(NA, c(4,2))), list("a", "b"))
assign(array(NA, c(4,2)), list("a", "b"))
colnames(baskets.team) <- c(“1st”, “2nd”, “3th”, “4th”, “5th”, “6th”)
colnames(baskets.team) <- c("1st", "2nd", "3th", "4th", "5th", "6th")
colnames(matrix(1:4, 2,2))
matrix(1:4, 2,2)
colnames(matrix(1:4, 2,2)) <- c("a", "b")
z <- matrix(1:4, 2,2)
colnames(z) <- c("a", "b")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
rest <- matrix(NA, n - nrow(temp), components)
names(rest) <- str_c("PC",1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) -> temp #%>%
#select(-time) -> temp
rest <- matrix(NA, n - nrow(temp), components)
colnames(rest) <- str_c("PC", 1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
tb <- roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
tb
View(tb)
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d) %>%
select(-time) -> temp
rest <- matrix(NA, n - nrow(temp), components)
colnames(rest) <- str_c("PC", 1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
tb <- roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
View(tb)
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d,
components = components) %>%
select(-time) -> temp
rest <- matrix(NA, n - nrow(temp), components)
colnames(rest) <- str_c("PC", 1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
tb <- roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
tb
View(tb)
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d,
components = components) %>%
select(-time) -> temp
print(temp)
rest <- matrix(NA, n - nrow(temp), components)
colnames(rest) <- str_c("PC", 1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
tb <- roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
############################
#Damit kann unter Angabe von
pca <- function(keywords = NA,
categories = 0,
start = as.Date("2006-01-01"),
end,
components = max(length(keywords), length(categories))){
stopifnot("Nur keywords oder categories darf angegeben werden" = is.na(keywords) | categories == 0)
dates = seq.Date(as.Date(start), as.Date(end), by = "month")
dat = tibble(date = NULL, key = NULL, value = NULL)
for (kw in keywords){
for (cat in categories){
as_tibble(gtrends(
keyword = kw,
category = cat,
geo = "DE",
time = "all")$interest_over_time)  -> temp
if (NROW(temp) == 0) stop(str_c("Keine Daten fÃ¼r Kategorie ", cat))
temp %>%
mutate(date = as_date(date)) %>%
select(date = date, key = any_of(c("keyword", "category")), value = hits) %>%
filter(date %in% dates) -> temp
dat <- bind_rows(dat, temp)
}
}
return(pivot_wider(ts_prcomp(dat), names_from = id, values_from = value)[1:components])
}
pca(keywords = c("abitur", "abiturnote", "NC"), end = "2021-01-01")
############################
#Damit kann unter Angabe von
pca <- function(keywords = NA,
categories = 0,
start = as.Date("2006-01-01"),
end,
components = max(length(keywords), length(categories))){
stopifnot("Nur keywords oder categories darf angegeben werden" = is.na(keywords) | categories == 0)
dates = seq.Date(as.Date(start), as.Date(end), by = "month")
dat = tibble(date = NULL, key = NULL, value = NULL)
for (kw in keywords){
for (cat in categories){
as_tibble(gtrends(
keyword = kw,
category = cat,
geo = "DE",
time = "all")$interest_over_time)  -> temp
if (NROW(temp) == 0) stop(str_c("Keine Daten fÃ¼r Kategorie ", cat))
temp %>%
mutate(date = as_date(date)) %>%
select(date = date, key = any_of(c("keyword", "category")), value = hits) %>%
filter(date %in% dates) -> temp
dat <- bind_rows(dat, temp)
}
}
return(pivot_wider(ts_prcomp(dat), names_from = id, values_from = value)[1:(components+1)])
}
roll <- function(keywords = NA,
categories = 0,
start_series = as.Date("2006-01-01"),
start_period = as.Date("2014-01-01"),
end = as.Date("2021-01-01"),
components = max(length(keywords), length(categories))){
period <-  seq.Date(as.Date(start_period), as.Date(end), by = "month")
dates <- seq.Date(as.Date("2006-01-01"), as.Date(end), by = "month")
pc <- tibble(date = dates)
n <- length(dates)#L?nge der ganzen Reihe
for (i in period){
d <- as.Date(i, origin = "1970-01-01")
pca(keywords = keywords,
categories = categories,
start = start_series,
end = d,
components = components) %>%
select(-time) -> temp
rest <- matrix(NA, n - nrow(temp), components)
colnames(rest) <- str_c("PC", 1:components)
rest <- as_tibble(rest)
temp <- bind_rows(temp, rest)
names(temp) <- str_c(names(temp), " to ", d)
pc <- bind_cols(pc, temp)
}
pc
}
pca(keywords = c("abitur", "abiturnote", "NC"), end = "2021-01-01")
tb <- roll(keywords = c("abitur", "abiturnote", "NC"),
start_period = "2007-01-01",
end = "2008-01-01")
View(tb)
library(tidyverse)
library(gtrendsR)
library(trendecon)
library(tsbox)
library(openxlsx)
library(corrr)
library(lubridate)
proc_keyword_init("arbeitslos", "DE")
proc_index("arbeitslos", "DE", "arbeitslos_ind")
proc_index("arbeitslos", "DE")
library(trendecon)
library(tsbox)
library(gtrendsR)
trendecon:::proc_keyword_latest("arbeitslos", "DE")
d <- proc_keyword_init("arbeitslos", "DE")
trendecon:::proc_keyword_latest("arbeitslos", "DE")
proc_index("arbeitslos", "DE", "arbeitslos_ind")
trendecon:::proc_keyword_latest("arbeitslos", "DE")
library(tidyverse)
library(gtrendsR)
library(trendecon)
library(tsbox)
library(openxlsx)
library(corrr)
library(lubridate)
trendecon:::proc_keyword_latest("arbeitslos", "DE")
proc_index("arbeitslos", "DE", "arbeitslos_ind")
getwd()
proc_keyword_init("arbeitslos", "DE")
?trendecon:::proc_keyword_latest
trendecon:::proc_keyword_latest("arbeitslos", "DE")
trendecon:::proc_keyword_latest
write_keyword
path_keyword
?normalizePath
?tolower
?normalizePath
?path_raw
path_raw
??path_raw
?trendecon:::path_raw
trendecon:::path_raw
path_trendecon()
path_trendecon
proc_keyword_init("arbeitslos", "DE")
remove.packages("trendecon")
library(trendecon)
