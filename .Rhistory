start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
as_tibble(gtrends(
keyword = kw,
geo = "DE",
time = "all"))$interes_over_time %>%
filter(time %in% dates) -> dat
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hartz z", end = "2021-01-01")
g_index(keywords = "Hartz 4", end = "2021-01-01")
gtrends(keyword = "Hart 4", category = 0, geo = "CH", time = "today+5-y")
g_index(keywords = "Hartz 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all"))$interes_over_time %>%
filter(time %in% dates) -> dat
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all"))$interest_over_time %>%
filter(time %in% dates) -> dat
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all"))$interest_over_time) #%>%
#      filter(time %in% dates) -> dat
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
gtrends(keyword = "Hartz 4", geo = "DE", time = "all")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)) #%>%
#      filter(time %in% dates) -> dat
# return(prcomp(ts_ts(dat)))
}
}
gtrends(keyword = "Hartz 4", geo = "DE", time = "all")
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(time %in% dates) %>%
select(date = as.Date(date), value = hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(time %in% dates) %>%
select(date, value = hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(time %in% dates) %>%
select(date, hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
#filter(time %in% dates) %>%
select(date, hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(time %in% date) %>%
select(date, hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(date %in% dates) %>%
select(date, hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(date %in% dates) %>%
select(as.Date(date), value = hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time) %>%
filter(date %in% dates) %>%
select(date, value = hits))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
select(date, value = hits) %>%
filter(date %in% dates))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
print(dates)
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
select(date, value = hits) %>%
filter(date %in% dates))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
select(date = floor_date(date, "day"), value = hits) %>%
filter(date %in% dates))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
select(date = date, value = hits) %>%
filter(date %in% dates))
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date))
select(date = date, value = hits) %>%
filter(date %in% dates))
# return(prcomp(ts_ts(dat)))
}
}
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
return(as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates))
# return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates)
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> dat
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = "Hart 4", end = "2021-01-01")
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"))
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"))$interest_over_time
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "now 1-d")$interest_over_time
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "now 1-d")$interest_over_time
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "all")$interest_over_time
gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "all")$interest_over_time[,3]
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> dat
return(prcomp(ts_ts(dat)))
}
}
g_index(keywords = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), end = "2021-01-01")
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
print(dates)
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> dat
return(prcomp(dat))
}
}
g_index(keywords = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), end = "2021-01-01")
t <- gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "all")$interest_over_time
t
t %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> tt
dates = seq.Date(as.Date("2004-01-01"), as.Date("2021-01-01"), by = "month")
t <- gtrends(keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz"), geo = "DE", time = "all")$interest_over_time
t %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> tt
tt
t
t %>%
mutate(date = as.Date(date)) %>%
select(date, keyword, value = hits) %>%
filter(date %in% dates) -> tt
tt
prcomp(tt)
ts_ts(tt)
prcomp(ts_ts(tt))
prcomp(ts_ts(tt)[-1])
ts_ts(tt)[-1]
as_tibble(tt)
t
dates = seq.Date(as.Date("2004-01-01"), as.Date("2021-01-01"), by = "month")
t <- gtrends(keyword = c("Wirtschaftskrise"), geo = "DE", time = "all")$interest_over_time
t
gtrends(keyword = c("Wirtschaftskrise", "insolvenz"), geo = "DE", time = "all")$interest_over_time
library(tidyverse)
library(gtrendsR)
library(trendecon)
library(tsbox)
library(openxlsx)
dates <- seq.Date(from = as.Date( "2004-01-01"), to = as.Date("2021-08-01"), by = "month")
####################Tibble mit Kategorien aus dem Paper erstellen
cat_paper <- as_tibble(read.csv("Kategorien_Woloszko.csv", head = F))
names(cat_paper) = "name"
cat<- as_tibble(categories)
cat_paper %>%
left_join(cat, by = "name") %>%
unique() -> cat_paper
##################Tibble mit Zeitreihen erstellen
series <- tibble(date = dates)
missing = NULL
for (i in cat_paper$id){
g <- gtrends(geo = "DE", time = "all", category = i)$interest_over_time
if (is.null(g)) missing <- c(missing, cat_paper$name[cat_paper$id == i])
else series <- bind_cols(series, i = g$hits)
}
names(series) <- c("date", setdiff(cat_paper$name, missing))
series %>%
pivot_longer(cols = -date, names_to = "id", values_to = "hits") -> series2
pc <- ts_pick(ts_prcomp(series2), c("PC1", "PC2", "PC3", "PC4", "PC5"))
load <- prcomp(series[-1], scale. = T)$rotation[,1:5]
gtrends(geo = "DE", time = "all", category = c(651))$interest_over_time
gtrends(geo = "DE", time = "all", category = c(770))$interest_over_time
gtrends(geo = "DE", time = "all", category = c(3))$interest_over_time
gtrends(geo = "DE", time = "all", category = c(3, 651))$interest_over_time
gtrends(geo = "DE", time = "all", category = c("3", "651"))$interest_over_time
g_index <- function(keywords = NA,
categories = 0,
end,
start = as.Date("2004-01-01"),
roll = F){
stopifnot("Nur keywords oder categories darf angegeben werden" = is.na(keywords) | categories == 0)
dates = seq.Date(as.Date("2004-01-01"), as.Date(end), by = "month")
if (!roll){
as_tibble(gtrends(
keyword = keywords,
geo = "DE",
time = "all")$interest_over_time)  %>%
mutate(date = as.Date(date)) %>%
select(date = date, value = hits) %>%
filter(date %in% dates) -> dat
return(prcomp(dat))
}
}
g_index(keywords = "test", categories = 4)
g_index(keywords = "test", categories = 0)
g_index(end = "2021-01-01", categories = 4)
g_index(end = "2021-01-01", categories = 651)
res$status_cod
devtools::install_github("PMassicotte/gtrendsR")
remove.packages("gtrendsR")
gtrends()
remove.packages("gtrendsR")
gtrends(3)
devtools::install_github("PMassicotte/gtrendsR")
detach
detach(gtrendsR)
detach("gtrendsR")
detach(gtrendsR, unload = T)
detach("package:gtrendsR", unload = T)
detach("package:trendecon", unload = T)
detach("package:gtrendsR", unload = T)
devtools::install_github("PMassicotte/gtrendsR")
library(gtrendsR)
install.packages(installr)
library(installr)
install.packages("installr")
library(installr)
updateR()
install.packages("survival")
plot(1:10)
keywords
t = c("a", "b", "g")
for (i in t) t
for (i in t) print(i)
library(tidyverse)
library(gtrendsR)
library(trendecon)
library(tsbox)
library(installr)
?updateR
