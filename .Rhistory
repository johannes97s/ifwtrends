m2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "20 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
dd <- select(dd, -n)
ww <- select(ww, -n)
mm <- select(mm, -n)
mm
ww
dd
wd <- tempdisagg::td(ww ~ dd, method = "fast", conversion = "mean")
wd
wd <- tempdisagg::td(ww ~ dd, method = "fast", conversion = "mean")
wd
wd <- predict(wd)
wd
mwd <- td2(mm ~ wd, method = "fast", conversion = "mean")
mwd <- predict(mwd)
mwd
mwd <- tempdisagg::td(mm ~ wd, method = "fast", conversion = "mean")
lf.dt <- tsbox::ts_regular(tsbox::ts_default(tsbox::ts_dts(ww)))
lf.dt
tsbox::ts_regular(tsbox::ts_default(tsbox::ts_dts(mm)))
tsbox::ts_regular(tsbox::ts_default(tsbox::ts_dts(ww)))
ts_dts(ww)
ts_dts(mm)
class
class(ww)
class(mm)
str(mm)
str(ww)
86*3
86*4
print(ww)
print(ww, n = 86)
mm %>% unique()
print(mm, n = 315)
print(22, n = 315)
print(ww, n = 315)
seq(Sys.Date(), length.out = 2, by = "-1 year")[2]
seq(Sys.Date(), length.out = 2, by = "-1 year")
# download monthly series
m <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "15 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
m2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = seq(Sys.Date(), length.out = 2, by = "-20 year")[2],
stepsize = "1 month", windowsize = "20 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
m
m2
w
w2
mm
week(mm$time)
mm %>% mutate(week = week(time)) ->mmw
mmw %>% group_by(week) %>% mutate(value = mean(value)) ->mmw
mmw
mmw %>% group_by(week) %>% mutate(value = mean(value)) %>% unique()->mmw
mmw
mm %>%
mutate(week = week(time))
mm %>%
mutate(week = week(time)) %>%
group_by(week)
tail(ww)
tail(mm)
mm %>%
mutate(week = week(time)) %>%
group_by(week) %>%
mutate(value = mean(value))
mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week) %>%
mutate(value = mean(value))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) -> mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
unique()-> mm
mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select(time, value)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select(time, value) %>%
ungroup() %>%
unique()-> mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select(time, value) %>%
ungroup(week, year) %>%
unique()-> mm
mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
ungroup(week, year) %>%
select(time, value) %>%
unique()-> mm
mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) -> mm
tail(mm)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
unique()
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
unique() -> mm
mm
tail(mm)
mutate(ww, week = week(time), year = year(time))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
select(value = mean(value), week = week, year = year) %>%
unique() -> mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm <- select(mm, -n)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
select(value = mean(value), week = week, year = year) %>%
unique() -> mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
select(value = mean(value), week = week, year = year) %>%
unique()
mm %>%
select(value = value, week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value))
mm
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
select(value = mean(value), week, year())
m
mm
mm %>%
mutate(week = week(time), year = year(time))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
select(value = mean(value), week, year)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select(- time)
mutate(ww, week = week(time), year = year(time))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
unique()
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
unique() -> mm
print(mm, n  =90)
print(ww, n = 90)
mutate(ww, week = week(time), year = year(time)) -> ww
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
unique() -> mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm <- select(mm, -n)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
unique() -> mm
print(ww, n = 90)
print(mm, n = 90)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week < 52)
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm <- select(mm, -n)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week < 52)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week < 52) %>%
unique() -> mm
mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
dd <- select(dd, -n)
ww <- select(ww, -n)
mm <- select(mm, -n)
mutate(ww, week = week(time), year = year(time)) -> ww
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week <= 52) %>%
unique() -> mm
mm
ww
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
dd <- select(dd, -n)
ww <- select(ww, -n)
mm <- select(mm, -n)
ww %>%
mutate(week = week(time), year = year(time)) %>%
filter(week <= 52) -> ww
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(ww$time)-> mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm <- select(mm, -n)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time)-> mm
mm
ee
ww
ww <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(w), trendecon:::aggregate_windows(w2))
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
dd <- select(dd, -n)
ww <- select(ww, -n)
mm <- select(mm, -n)
ww %>%
mutate(week = week(time), year = year(time)) %>%
filter(week <= 52) %>%
select(time, value) -> ww
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time) %>%
select(time, value)-> mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm <- select(mm, -n)
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
ungroup() %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time) %>%
select(time, value)-> mm
mm
ee
ww
mwd <- tempdisagg::td(mm ~ wd, method = "fast", conversion = "mean")
mwd <- predict(mwd)
ww <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(w), trendecon:::aggregate_windows(w2))
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
dd <- select(dd, -n)
ww <- select(ww, -n)
mm <- select(mm, -n)
ww %>%
mutate(week = week(time), year = year(time)) %>%
filter(week <= 52) %>%
select(time, value) -> ww
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
ungroup() %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time) %>%
select(time, value)-> mm
wd <- tempdisagg::td(ww ~ dd, method = "fast", conversion = "mean")
wd <- predict(wd)
mwd <- tempdisagg::td(mm ~ wd, method = "fast", conversion = "mean")
mwd <- predict(mwd)
mwd
mwd %>% group_by(month(time))
mwd %>% group_by(florr_date(time, "month"))
mwd %>% group_by(floor_date(time, "month"))
mwd %>% group_by(floor_date(time, "month")) %>% mutate(mean = mean(value))
print(mwd %>% group_by(floor_date(time, "month")) %>% mutate(mean = mean(value)), n = 60)
print(mm, n = 60)
plot(mwd$value, type = "l")
lines(mm$value, col = "red")
plot(mwd$mean, type = "l")
mwd %>% group_by(floor_date(time, "month")) %>% mutate(mean = mean(value)) -> mwd
plot(mwd$mean, type = "l")
lines(mm$value, col = "red")
plot(mwd, type = "l")
plot(mwd$time, mwd$value, type = "l")
keyword = c("Wirtschaftskrise", "Kurzarbeit", "arbeitslos", "Insolvenz")
geo = "DE"
from <- "2006-01-01"
d <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "15 days", windowsize = "6 months",
n_windows = 348, wait = 20, retry = 10,
prevent_window_shrinkage = TRUE
)
d2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = seq(Sys.Date(), length.out = 2, by = "-90 days")[2],
stepsize = "1 day", windowsize = "3 months",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
dd <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(d), trendecon:::aggregate_windows(d2))
# download weakly series
w <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "11 weeks", windowsize = "5 years",
n_windows = 68, wait = 20, retry = 10,
prevent_window_shrinkage = TRUE
)
w2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = seq(Sys.Date(), length.out = 2, by = "-1 year")[2],
stepsize = "1 week", windowsize = "1 year",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
ww <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(w), trendecon:::aggregate_windows(w2))
# download monthly series
m <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "15 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
m2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "20 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
keyword = c("arbeitslos")
geo = "DE"
from <- "2006-01-01"
d <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "15 days", windowsize = "6 months",
n_windows = 348, wait = 20, retry = 10,
prevent_window_shrinkage = TRUE
)
d2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = seq(Sys.Date(), length.out = 2, by = "-90 days")[2],
stepsize = "1 day", windowsize = "3 months",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
dd <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(d), trendecon:::aggregate_windows(d2))
# download weakly series
w <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "11 weeks", windowsize = "5 years",
n_windows = 68, wait = 20, retry = 10,
prevent_window_shrinkage = TRUE
)
w2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = seq(Sys.Date(), length.out = 2, by = "-1 year")[2],
stepsize = "1 week", windowsize = "1 year",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
ww <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(w), trendecon:::aggregate_windows(w2))
# download monthly series
m <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "15 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
m2 <- trendecon:::ts_gtrends_windows(
keyword = keyword,
geo = geo,
from = from,
stepsize = "1 month", windowsize = "20 years",
n_windows = 12, wait = 20, retry = 10,
prevent_window_shrinkage = FALSE
)
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mwd
ma <- ts_gtrends("amazon", "De", time = "2006-01-01 2021-08-24")
ma <- ts_gtrends("amazon", geo = "De", time = "2006-01-01 2021-08-24")
ma <- ts_gtrends("amazon", geo = "DE", time = "2006-01-01 2021-08-24")
ma
mwd %>%
select(time, mean) %>%
mutate(time = floor_date(time, "month")) %>%
group_by(time) %>%
unique
mwd <- tempdisagg::td(mm ~ wd, method = "fast", conversion = "mean")
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
ungroup() %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time) %>%
select(time, value)-> mm
mm <- trendecon:::aggregate_averages(trendecon:::aggregate_windows(m), trendecon:::aggregate_windows(m2))
mm %>%
mutate(week = week(time), year = year(time)) %>%
group_by(week, year) %>%
mutate(value = mean(value)) %>%
ungroup() %>%
select( - time) %>%
filter(week <= 52) %>%
unique() %>%
bind_cols(time = ww$time) %>%
select(time, value)-> mm
write.xlsx(mm, "mwd.xlsx")
write.xlsx(mwd, "mwd.xlsx")
write.xlsx(mwd, "mwd.xlsx")
