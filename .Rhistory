facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 52))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,52), diff(fd_1, 52))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,52), diff(fd_1, 52))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,52), diff(fd_1, 52))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
?dif
?diff
library(tidyverse)
library(AER)
library(plm)
as_tibble(Fatalities) %>%
mutate(fatal_rate = fatal/pop*100) -> dat
lm(fatal_rate ~ beertax + I(2*beertax), data = dat)
dates <- seq.Date(from = as.Date( "2004-01-01"), to = as.Date("2021-08-01"), by = "month")
####################Tibble mit Kategorien aus dem Paper erstellen
cat_paper <- as_tibble(read.csv("~/ifwtrends/data/Kategorien_Woloszko.csv", head = F))
names(cat_paper) = "name"
cat<- as_tibble(categories)
cat_paper %>%
left_join(cat, by = "name") %>%
unique() -> cat_paper
##################Tibble mit Zeitreihen erstellen
series <- tibble(date = dates)
missing = NULL
for (i in cat_paper$id[21:30]){
g <- gtrends(geo = "DE", time = "all", category = i)$interest_over_time
if (is.null(g)) missing <- c(missing, cat_paper$name[21:50][cat_paper$id[21:30] == i])
else series <- bind_cols(series, i = g$hits)
}
names(series) <- c("date", setdiff(cat_paper$name[21:30], missing))
series %>%
pivot_longer(cols = -date, names_to = "id", values_to = "hits")-> series2
series2
ggplot(series2, aes(x = date, y = hits, color = id)) +
geom_line()
fit <- lm(hits ~ id - 1 + poly(as.numeric(date), 5, raw = T), data = series2)
ser_adj <- bind_cols(series2, adj_hits = as_tibble(fit$residuals))
ggplot(ser_adj, aes(x = date, y = value, color = id)) +
geom_line()
ggplot(series2, aes(x = date, y = hits, color = id)) +
geom_line()
ggplot(ser_adj, aes(x = date, y = value, color = id)) +
geom_line()
series %>%
pivot_longer(cols = -date, names_to = "id", values_to = "hits")-> series2
series %>%
pivot_longer(cols = -date, names_to = "id", values_to = "hits") %>%
mutate(hits = log(hits)) -> series2
series2
ggplot(series2, aes(x = date, y = hits, color = id)) +
geom_line()
fit <- lm(hits ~ id - 1 + poly(as.numeric(date), 5, raw = T), data = series2)
ser_adj <- bind_cols(series2, adj_hits = as_tibble(fit$residuals))
ggplot(ser_adj, aes(x = date, y = value, color = id)) +
geom_line()
ggplot(series2, aes(x = date, y = hits, color = id)) +
geom_line()
ggplot(ser_adj, aes(x = date, y = value, color = id)) +
geom_line()
series
series2
t
fit2 <- lm(value, poly(as.numeric(time)), data = t)
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- binc_cols(t, fit2$residuals)
t <- bind_cols(t, fit2$residuals)
t <- bind_cols(t, adj = fit2$residuals)
ggplot(aes(x = date, y = hits, color = id ))
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = date, y = hits, color = id ))
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits")
bind_cols(t, adj = fit2$residuals)
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
bind_cols(t, adj = fit2$residuals)
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits")
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = date, y = hits, color = id )) + geom_line()
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) + geom_line()
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y")
bind_cols(t, adj = fit2$residuals) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_1 = c(0, diff(t$adj))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
plot(t, type = "l")
plot(t$value, type = "l")
t
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
plot(t, type = "l")
plot(filter(t, time >= Sys.Date()-365*5), type = "l")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_1 = c(0, diff(t$adj))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_1 = c(0, diff(t$adj))
fd_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
ser_adj <- function(series, trend = T, seas = T, method = "first diff"){
}
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value") %>%
ggplot(aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to= "value")
t
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits")
t
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
t
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits")
t
ggplot(t, aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
corrr::correlate()
t
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
corrr::correlate()
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
select(-time) %>%
corrr::correlate()
t
fit2
fit2 <- lm(value ~ poly(as.numeric(time), 5), data = t)
fit2
fit2 <- lm(value ~ as.numeric(time), data = t)
fit2
fit2 <- lm(value ~ poly(as.numeric(time), 5), data = t)
summary(fit2)
fit2 <- lm(value ~ poly(as.numeric(time), 5), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time), 5), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)  %>%
select(-time) %>%
corrr::correlate()
pivot_longer(t, cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(t, aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12) %>%
pivot_longer(, cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(t, aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(t, aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12) %>%
pivot_longer(cols = -time, names_to = "id", values_to = "hits") %>%
ggplot(aes(x = time, y = hits, color = id )) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
t <- ts_gtrends("ikea", time = "all"
t <- ts_gtrends("ikea", time = "all")
plot(t, type = "l")
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time), 5), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t
t$fd_1 - t$fd_adj_1
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ poly(as.numeric(time)), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t$fd_1 - t$fd_adj_1
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
ggplot(t, aes(x = time, y = value, color = id)) +
geom_line() +
facet_grid(id ~ ., scales = "free_y") +
theme(legend.position = "none")
fit2 <- lm(value ~ as.numeric(time), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t$fd_1 - t$fd_adj_1
fit2
t <- ts_gtrends("ikea", time = "all") %>%
mutate(time = 1:212, value = log(value))
t
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t$fd_1 - t$fd_adj_1
fit2
t <- 1:212*0.5+rnorm(212, sd = 0.2)
plot(t)
plot(t, type = "l")
t <- 1:212*0.5+rnorm(212, sd = 1)
plot(t, type = "l")
t <- 1:212*0.5+rnorm(212, sd = 4)
plot(t, type = "l")
t <- 1:212*0.5+rnorm(212, sd = 6)
plot(t, type = "l")
t <- 1:212*0.5+rnorm(212, sd = 8)
plot(t, type = "l")
t <- 1:212*0.5+rnorm(212, sd = 6)
fd_1 = c(0, diff(t$value))
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
t <- as_tibble(time = t$time, value = 1:212*0.5+rnorm(212, sd = 6))
t
t <- ts_gtrends("ikea", time = "all") %>%
mutate(value = log(value))
t <- tibble(time = t$time, value = 1:212*0.5+rnorm(212, sd = 6))
t
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
fit2 <- lm(value ~ as.numeric(time), data = t)
t <- bind_cols(t, adj = fit2$residuals)
fd_adj_1 = c(0, diff(t$adj))
fd_adj_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_adj_1 = fd_adj_1, fd_adj_12 = fd_adj_12)
t
t$fd_1 - t$fd_adj_1
fit2
4*.01649
t
0.5/.01649
1/.0165
mean(c(31,28,31,30,31,30,31,31,30,31,30,31))
0.0002827*30.3
t$fd_1 - t$fd_adj_1
mean(t$fd_1 - t$fd_adj_1)
t <- ts_gtrends(c("ikea", "saturn"), time = "all") %>%
mutate(value = log(value))
t
ser_adj <- function(series, trend = T, seas = T, trend_method = "first diff"){
series <- mutate(value = log(value))
if(trend && trend_method == "first_diff"){
series <- series %>%
group_by(id) %>%
mutate(FD_1 = c(0, diff(value))) %>%
ungroup()
}
if(trend && trend_method == "com_trend"){
fit <- lm(value ~ id -1 +poly(as.numeric(time), 5, raw = T), data = series)
series <- bind_cols(series, adj = fit$residuals)
}
if(seas){
series <- series %>%
group_by(id) %>%
mutate(FD_12 = c(rep(0,12), diff(value, 12)))
}
series
}
t <- ts_gtrends(c("ikea", "saturn"), time = "all")
ser_adj(t, trend = T, trend_method = "firstdiff")
t
ser_adj <- function(series, trend = T, seas = T, trend_method = "firstdiff"){
series <- mutate(series, value = log(value))
if(trend && trend_method == "first_diff"){
series <- series %>%
group_by(id) %>%
mutate(FD_1 = c(0, diff(value))) %>%
ungroup()
}
if(trend && trend_method == "comtrend"){
fit <- lm(value ~ id -1 +poly(as.numeric(time), 5, raw = T), data = series)
series <- bind_cols(series, adj = fit$residuals)
}
if(seas){
series <- series %>%
group_by(id) %>%
mutate(FD_12 = c(rep(0,12), diff(value, 12)))
}
series
}
ser_adj(t, trend = T, trend_method = "firstdiff")
ser_adj <- function(series, trend = T, seas = T, trend_method = "firstdiff"){
series <- mutate(series, value = log(value))
if(trend && trend_method == "firstdiff"){
series <- series %>%
group_by(id) %>%
mutate(FD_1 = c(0, diff(value))) %>%
ungroup()
}
if(trend && trend_method == "comtrend"){
fit <- lm(value ~ id -1 +poly(as.numeric(time), 5, raw = T), data = series)
series <- bind_cols(series, adj = fit$residuals)
}
if(seas){
series <- series %>%
group_by(id) %>%
mutate(FD_12 = c(rep(0,12), diff(value, 12)))
}
series
}
ser_adj(t, trend = T, trend_method = "firstdiff")
t <- ts_gtrends(c("ikea", "saturn"), time = "all") %>%
mutate(value = log(value))
fd_1 = c(0, diff(t$value))
fd_12 = c(rep(0,12), diff(fd_1, 12))
t <- bind_cols(t, fd_1 = fd_1, fd_12 = fd_12)
t
?ts_ggplot
